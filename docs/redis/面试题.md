### 什么是redis

redis是一个键值型的内存数据库，支持丰富的数据结构：string，list，hash，set，zset，bitmap，geo等。redis所有数据都放在内存中，所以redis的读写速度非常快，redis的处理线程是单线程的。所以并发场景下不用担心出现脏数据或者异常操作。

redis支持将数据持久化到硬盘上，所以有比较强的恢复策略。

redis可用用来做缓存，消息队列，订阅发布，分布式锁等。

### redis等使用场景

1. 缓存：热key，大key，过期，清理策略
2. 消息队列：使用list做消息队列，提供订阅发布，阻塞队列
3. 分布式锁：set key nx ex ，红锁；jedis（看门狗），letture，reddission
4. 计数器：工作线程是单线程，不用担心线程脏读脏写，多路IO复用支持高并发量
5. 排行榜：列表+集合实现

### redis基本数据结构

1. 字符串：存储优化，压缩，值最大不能超过512MB。
2. list：
3. hash：缓存对象，缓存用户信息，可以取对象部分属性而非将对象整体取出
4. set：共同关注（集合取并集）
5. zset：底层使用跳表（原理）

### redis快到原因

1. 内存存储
2. 单线程模式，避免线程切换和竞态带来的开销
3. 非阻塞的多路IO复用
4. C语言实现，对底层数据结构进行了优化

### 多路IO复用
举例解释：比如说你是一个老师，现在布置了一道题，你要检查30名同学的完成情况。

方案一：先检查1号，1号检查完在检查2号，依次类推。

方案二：创建30个分身同时检查30名同学

方案三：坐在讲台监视所有同学，完成的同学举手，同意后上台检查，检查完之后

解释：

方案一是线程阻塞模型，主线程卡住时CPU空转等待线程完成任务

方案二就是多线程方案，每个任务启动一个线程去处理

方案三就是多路IO复用，多路IO复用的实现方式有三种：select，poll，epoll
